2025-08-17 23:09:18 | INFO     | app.config.logging_config:configure_logging:36 - Logging configured. Log file: logs\pend_claim_analysis.log
2025-08-17 23:09:20 | INFO     | app.core.mcp_client:<module>:53 - AzureChatOpenAI LLM client initialized successfully.
2025-08-17 23:09:20 | INFO     | app.core.mcp_client:build_mcp_workflow:307 - MCP workflow compiled successfully.
2025-08-17 23:09:41 | INFO     | __main__:process_claim:108 - Claim data: {'icn': '20251220007100', 'claim_type': None, 'member_id': '123456789', 'member_name': 'S. Smith', 'member_dob': '1990-06-01', 'member_gender': None, 'provider_number': '59017777777777', 'provider_name': 'Dr Jeffrey Gastro', 'provider_type': '27', 'provider_specialty': '80', 'total_charge': 600.0, 'primary_dx_code': 'Z98.84', 'claim_lines': [{'icn': '20251220007100', 'line_no': 10, 'diagnosis_code': 'Z81.8', 'procedure_code': '90863', 'first_dos': '2021-02-13', 'last_dos': '2021-02-13', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 200.0, 'allowed_amount': 200.0, 'deductible': 0.0, 'coinsurance': 0.0, 'copay': 100.0, 'condition_code': 'F027'}, {'icn': '20251220007100', 'line_no': 20, 'diagnosis_code': 'G89.3', 'procedure_code': '97810', 'first_dos': '2021-02-25', 'last_dos': '2021-02-26', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 400.0, 'allowed_amount': 100.0, 'deductible': 50.0, 'coinsurance': 0.0, 'copay': 0.0, 'condition_code': None}]}
2025-08-17 23:09:41 | INFO     | __main__:process_claim:114 - Condition codes: ['F027']
2025-08-17 23:09:41 | ERROR    | app.sops.loader:load_all:104 - SOPLoader.load_all failed: SOPLoader called from an active event loop; use async methods instead.
2025-08-17 23:09:41 | INFO     | __main__:process_claim:120 - SOP: None
2025-08-17 23:13:27 | INFO     | app.config.logging_config:configure_logging:36 - Logging configured. Log file: logs\pend_claim_analysis.log
2025-08-17 23:13:30 | INFO     | app.core.mcp_client:<module>:53 - AzureChatOpenAI LLM client initialized successfully.
2025-08-17 23:13:30 | INFO     | app.core.mcp_client:build_mcp_workflow:307 - MCP workflow compiled successfully.
2025-08-17 23:13:37 | INFO     | __main__:process_claim:136 - Claim data: {'icn': '20251220007100', 'claim_type': None, 'member_id': '123456789', 'member_name': 'S. Smith', 'member_dob': '1990-06-01', 'member_gender': None, 'provider_number': '59017777777777', 'provider_name': 'Dr Jeffrey Gastro', 'provider_type': '27', 'provider_specialty': '80', 'total_charge': 600.0, 'primary_dx_code': 'Z98.84', 'claim_lines': [{'icn': '20251220007100', 'line_no': 10, 'diagnosis_code': 'Z81.8', 'procedure_code': '90863', 'first_dos': '2021-02-13', 'last_dos': '2021-02-13', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 200.0, 'allowed_amount': 200.0, 'deductible': 0.0, 'coinsurance': 0.0, 'copay': 100.0, 'condition_code': 'F027'}, {'icn': '20251220007100', 'line_no': 20, 'diagnosis_code': 'G89.3', 'procedure_code': '97810', 'first_dos': '2021-02-25', 'last_dos': '2021-02-26', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 400.0, 'allowed_amount': 100.0, 'deductible': 50.0, 'coinsurance': 0.0, 'copay': 0.0, 'condition_code': None}]}
2025-08-17 23:13:37 | INFO     | __main__:process_claim:142 - Condition codes: ['F027']
2025-08-17 23:13:37 | INFO     | app.sops.loader:_fetch_all_sops:46 - SOPLoader: Fetching SOPs from MCP database.
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:mcp_initialize_state:136 - MCP Workflow: Initializing state.
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:initialize_mcp_tools:118 - Successfully initialized MCP tools: ['execute_query', 'get_all_sops', 'get_sop_by_code', 'get_database_schema']
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:mcp_execute_query_node:149 - MCP Workflow: Entering execute_query_node.
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:mcp_execute_query_node:172 - MCP Workflow: Executing query via tool: 'SELECT id, sop_code, step_number, description, query FROM SOP ORDER BY sop_code, step_number...'
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:mcp_execute_query_node:204 - MCP query executed successfully.
2025-08-17 23:13:37 | INFO     | app.core.mcp_client:mcp_process_results_node:224 - MCP Workflow: Entering process_results_node.
2025-08-17 23:13:47 | INFO     | app.core.mcp_client:mcp_process_results_node:283 - Query results processed successfully by agent.
2025-08-17 23:13:47 | ERROR    | app.sops.loader:_fetch_all_sops:80 - Error creating SOPStep for B007: 'types.UnionType' object is not callable
2025-08-17 23:13:47 | ERROR    | app.sops.loader:_fetch_all_sops:80 - Error creating SOPStep for B007: 'types.UnionType' object is not callable
2025-08-17 23:13:47 | ERROR    | app.sops.loader:_fetch_all_sops:80 - Error creating SOPStep for B007: 'types.UnionType' object is not callable
2025-08-17 23:13:47 | ERROR    | app.sops.loader:_fetch_all_sops:80 - Error creating SOPStep for B007: 'types.UnionType' object is not callable
2025-08-17 23:13:47 | ERROR    | app.sops.loader:load_all_async:113 - SOPLoader.load_all_async failed: "'sop_code'"
2025-08-17 23:13:47 | INFO     | __main__:process_claim:149 - SOP: None
2025-08-17 23:18:59 | INFO     | app.config.logging_config:configure_logging:36 - Logging configured. Log file: logs\pend_claim_analysis.log
2025-08-17 23:19:02 | INFO     | app.core.mcp_client:<module>:53 - AzureChatOpenAI LLM client initialized successfully.
2025-08-17 23:19:02 | INFO     | app.core.mcp_client:build_mcp_workflow:307 - MCP workflow compiled successfully.
2025-08-17 23:24:07 | INFO     | app.config.logging_config:configure_logging:36 - Logging configured. Log file: logs\pend_claim_analysis.log
2025-08-17 23:24:10 | INFO     | app.core.mcp_client:<module>:53 - AzureChatOpenAI LLM client initialized successfully.
2025-08-17 23:24:10 | INFO     | app.core.mcp_client:build_mcp_workflow:307 - MCP workflow compiled successfully.
2025-08-17 23:24:16 | INFO     | __main__:process_claim:136 - Claim data: {'icn': '20251220007100', 'claim_type': None, 'member_id': '123456789', 'member_name': 'S. Smith', 'member_dob': '1990-06-01', 'member_gender': None, 'provider_number': '59017777777777', 'provider_name': 'Dr Jeffrey Gastro', 'provider_type': '27', 'provider_specialty': '80', 'total_charge': 600.0, 'primary_dx_code': 'Z98.84', 'claim_lines': [{'icn': '20251220007100', 'line_no': 10, 'diagnosis_code': 'Z81.8', 'procedure_code': '90863', 'first_dos': '2021-02-13', 'last_dos': '2021-02-13', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 200.0, 'allowed_amount': 200.0, 'deductible': 0.0, 'coinsurance': 0.0, 'copay': 100.0, 'condition_code': 'F027'}, {'icn': '20251220007100', 'line_no': 20, 'diagnosis_code': 'G89.3', 'procedure_code': '97810', 'first_dos': '2021-02-25', 'last_dos': '2021-02-26', 'type_of_service': None, 'pos_code': '21', 'provider_number': '59017777777777', 'charge': 400.0, 'allowed_amount': 100.0, 'deductible': 50.0, 'coinsurance': 0.0, 'copay': 0.0, 'condition_code': None}]}
2025-08-17 23:24:16 | INFO     | __main__:process_claim:142 - Condition codes: ['F027']
2025-08-17 23:24:16 | INFO     | app.sops.loader:_fetch_all_sops:46 - SOPLoader: Fetching SOPs from MCP database.
2025-08-17 23:24:16 | INFO     | app.core.mcp_client:mcp_initialize_state:136 - MCP Workflow: Initializing state.
2025-08-17 23:24:16 | INFO     | app.core.mcp_client:initialize_mcp_tools:118 - Successfully initialized MCP tools: ['execute_query', 'get_all_sops', 'get_sop_by_code', 'get_database_schema']
2025-08-17 23:24:16 | INFO     | app.core.mcp_client:mcp_execute_query_node:149 - MCP Workflow: Entering execute_query_node.
2025-08-17 23:24:16 | INFO     | app.core.mcp_client:mcp_execute_query_node:172 - MCP Workflow: Executing query via tool: 'SELECT id, sop_code, step_number, description, query FROM SOP ORDER BY sop_code, step_number...'
2025-08-17 23:24:17 | INFO     | app.core.mcp_client:mcp_execute_query_node:204 - MCP query executed successfully.
2025-08-17 23:24:17 | INFO     | app.core.mcp_client:mcp_process_results_node:224 - MCP Workflow: Entering process_results_node.
2025-08-17 23:24:26 | INFO     | app.core.mcp_client:mcp_process_results_node:283 - Query results processed successfully by agent.
2025-08-17 23:24:26 | INFO     | app.sops.loader:_fetch_all_sops:96 - SOPLoader: Loaded 2 SOP definitions from MCP.
2025-08-17 23:24:26 | INFO     | __main__:process_claim:149 - SOP: None
